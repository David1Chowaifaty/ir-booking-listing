import{r as t,c as e,h as i,H as s}from"./p-0679b1cc.js";import{B as a}from"./p-2db06f8f.js";import{l}from"./p-3183a7ca.js";import{c as n}from"./p-fe7a1185.js";import{v as o}from"./p-1a0d8ecf.js";import"./p-bcc8f299.js";import"./p-7720545a.js";import"./p-70bb2f4b.js";import"./p-227fb461.js";import"./p-5872a6ca.js";const c=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const d=c;const h=class{constructor(i){t(this,i);this.dataUpdateEvent=e(this,"dataUpdateEvent",7);this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new a;this.defaultData=undefined;this.fromDate=undefined;this.toDate=undefined;this.entryDate=undefined;this.entryHour=undefined;this.isEventHover=false;this.entryMinute=undefined;this.renderAgain=false}async componentWillLoad(){try{this.bookingService.setToken(n.token);this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(t){}}handleOptionalReason(t){this.blockDatesData.OPTIONAL_REASON=t.target.value;this.emitData()}handleReleaseAfterChange(t){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(t.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let t=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){t.setHours(this.entryHour,this.entryMinute,0,0)}else{t.setHours(t.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,t.getMinutes(),0,0)}return t.toLocaleString("default",{month:"short"})+" "+t.getDate()+", "+this.formatNumber(t.getHours())+":"+this.formatNumber(t.getMinutes())}formatNumber(t){return t<10?`0${t}`:t}handleOutOfService(t){this.blockDatesData.OUT_OF_SERVICE=t.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){console.log(this.fromDate);return i(s,{key:"4574561cc78b3355edb5ea9ef31a58955878ded7"},i("div",{key:"3b141c0d1d560f617f46f83b49f45c041704a637",class:`m-0 p-0 mb-1`},i("div",{key:"3d098bf394818971483e29aac6ff35f0ca32c833",class:"text-left p-0"},i("ir-date-view",{key:"523921c7e334a3cf774930bfe8586695c5c3e197",from_date:this.fromDate,dateOption:"DD MMM YYYY",showDateDifference:false,to_date:this.toDate}))),i("div",{key:"7895ff0ae86edda86d4b9077c6ca09725158fac6",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},i("div",{key:"a37aa9c0e51da1cb0b790b185a30522cf5a4f6c9",class:"mb-1 "},i("label",{key:"c74144a31d980fd9e79673e94f13a57092ca49db",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},l.entries.Lcz_Reason,":"),i("div",{key:"eef0735f8a7e7fd0928b4dafcd7022e8c9d1b423",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},i("input",{key:"ee9729b01dcc958b9bcf59ad0f47f98e8837ad5e",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:t=>this.handleOutOfService(t)})),i("span",{key:"2bb4ddf93b7bb6a9c730c7acbe4e3ac631a5cb60",class:"align-middle out-of-service-label"},l.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?i("div",null,i("div",{class:"mb-1 d-flex  align-items-center"},i("span",{class:"align-middle"},l.entries.Lcz_Or," "),i("div",{class:"d-inline-flex col pr-0 align-middle"},i("input",{class:"form-control",type:"text",placeholder:l.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:t=>this.handleOptionalReason(t)}))),i("div",{class:"mb-1 w-100 pr-0 "},i("span",{class:"text-bold-700 font-medium-1"},l.entries.Lcz_AutomaticReleaseIn,": "),i("div",{class:"d-inline-block"},i("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:t=>this.handleReleaseAfterChange(t)},this.releaseList.map((t=>i("option",{value:+t.CODE_NAME,selected:this.blockDatesData.RELEASE_AFTER_HOURS==+t.CODE_NAME},t.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?i("div",{class:"d-inline-block releaseTime"},i("em",null,l.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};h.style=d;const r="*.sc-ota-label{margin:0;padding:0}.sc-ota-label-h{display:flex;margin-bottom:5px;gap:5px;width:100%}strong.sc-ota-label{margin:0;padding:0}ul.sc-ota-label{margin:0 3px;padding:0;list-style:none;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important}li.sc-ota-label{width:100%;line-height:1.5;margin:0;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important}button.sc-ota-label{background:white;color:var(--blue);padding:0;margin:0;margin-left:3px;font-size:12px;border:0}button.sc-ota-label:hover{color:#355270}";const f=r;const b=class{constructor(e){t(this,e);this.toggleShowAll=()=>{this.showAll=!this.showAll};this.label=undefined;this.remarks=undefined;this.maxVisibleItems=3;this.showAll=false}render(){if(!this.remarks){return null}const t=this.showAll?this.remarks:this.remarks.slice(0,this.maxVisibleItems);return i(s,null,i("strong",null,this.label),i("ul",null,t.map(((e,s)=>i("li",{key:o()},"- ",e.statement," ",this.remarks.length>this.maxVisibleItems&&s===t.length-1&&i("button",{onClick:this.toggleShowAll},this.showAll?l.entries.Lcz_ShowLess:l.entries.Lcz_ShowMore))))))}};b.style=f;export{h as igl_block_dates_view,b as ota_label};
//# sourceMappingURL=p-c2e800a3.entry.js.map